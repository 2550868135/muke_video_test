<%inherit file="../base.html"/>
<%! from django.shortcuts import reverse %>
<%def name="content()">
<%! from app.model.video import VideoType,FromType,NationalityType %>
<%! from datetime import datetime %>
<h1>外链视频</h1>
<button class="btn btn-info open-btn" id="open-add-video-btn">创建</button><span>${ error }</span>
<form class="form-horizontal edit-area add-video-area" id="video-edit-area" action="${reverse('external_video')}" method="post">
    ${ csrf_token }
    <div class="form-group">
        <div class="col-sm-10">
            <input type="text" class="form-control" name="name" placeholder="视频名称">
        </div>
    </div>
    <div class="form-group">
        <div class="col-sm-10">
            <input type="text" class="form-control" name="image" placeholder="海报">
        </div>
    </div>
    <div class="form-group">
        <div class="col-sm-10">
            <label>视频类型</label>
            <select name="video_type" class="form-control video-select">
                %for video_type in VideoType:
                <option value="${ video_type.value }">
                    ${ video_type.label }
                </option>
                %endfor
            </select>
        </div>
    </div>
    <div class="form-group">
        <div class="col-sm-10">
            <label>视频来源</label>
            <select name="from_to" class="form-control video-select">
                %for from_type in FromType:
                <option value="${ from_type.value }">
                    ${ from_type.label }
                </option>
                %endfor
            </select>
        </div>
    </div>
    <div class="form-group">
        <div class="col-sm-10">
            <label>国籍</label>
            <select name="nationality" class="form-control video-select">
                %for nationality_type in NationalityType:
                <option value="${ nationality_type.value }">
                    ${ nationality_type.label }
                </option>
                %endfor
            </select>
        </div>
    </div>
    <div class="form-group">
        <div class="col-sm-10">
            <textarea name="info" class="form-control" placeholder="简介"></textarea>
        </div>
    </div>
    <button type="submit" class="btn btn-default btn-info">添加</button>
</form>
<h3>外链视频</h3>
<table class="table">
    <thead>
        <tr>
            <th>名称</th>
            <th>image</th>
            <th>视频类型</th>
            <th>视频来源</th>
            <th>国籍</th>
            <th>描述</th>
            <th>状态</th>
            <th>创建时间</th>
            <th>修改时间</th>
            <th>操作</th>
        </tr>
    </thead>
    <tbody>
        %for video in ex_videos:
        <tr>
            <td>${video.name}</td>
            <td><img class="video-iamges" src="${video.image}" alt="加载失败"/></td>
            <td>${VideoType[video.video_type].label}</td>
            <td>${FromType[video.from_to].label}</td>
            <td>${NationalityType[video.nationality].label}</td>
            <td><p class="info">${video.info}</p></td>
            <td>${video.status}</td>
            <td>${video.create.strftime("%Y-%m-%d %H:%M:%S" )}</td>
            <td>${video.update.strftime("%Y-%m-%d %H:%M:%S" )}</td>
            <td>
                <a href="${ reverse('video_update',kwargs={'video_id':video.id})}">编辑</a>|
                <a href="${ reverse('video_sub',kwargs={'video_id':video.id}) }">附属信息</a>|
                <a href="${ reverse('video_update_status',kwargs={'video_id':video.id}) }">修改状态</a>
            </td>
        </tr>
        %endfor
    </tbody>
</table>
<h3 id="custom-h3">自制视频</h3>
<table class="table">
    <thead>
        <tr>
            <th>名称</th>
            <th>image</th>
            <th>视频类型</th>
            <th>视频来源</th>
            <th>国籍</th>
            <th>描述</th>
            <th>状态</th>
            <th>创建时间</th>
            <th>修改时间</th>
            <th>操作</th>
        </tr>
    </thead>
    <tbody>
        %for video in cus_videos:
        <tr>
            <td>${video.name}</td>
            <td><img class="video-iamges" src="${video.image}" alt="加载失败"/></td>
            <td>${VideoType[video.video_type].label}</td>
            <td>${FromType[video.from_to].label}</td>
            <td>${NationalityType[video.nationality].label}</td>
            <td><p class="info">${video.info}</p></td>
            <td>${video.status}</td>
            <td>${video.create.strftime("%Y-%m-%d %H:%M:%S" )}</td>
            <td>${video.update.strftime("%Y-%m-%d %H:%M:%S" )}</td>
            <td>
                <a href="${ reverse('video_update',kwargs={'video_id':video.id})}">编辑</a>|
                <a href="${ reverse('video_sub',kwargs={'video_id':video.id}) }">附属信息</a>|
                <a href="${ reverse('video_update_status',kwargs={'video_id':video.id}) }">修改状态</a>
            </td>
        </tr>
        %endfor
    </tbody>
</table>
</%def>
<%def name="css()">
<link href="/static/dashboard/css/external_video.css/?v=1" rel="stylesheet">
</%def>
<%def name="js()">
<script src="/static/dashboard/js/external_video.js"></script>
</%def>